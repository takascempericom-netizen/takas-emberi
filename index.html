<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Takas Çemberi • Giriş / Kayıt</title>
  <meta name="color-scheme" content="light dark">
  <style>
    :root{
      --bg:#0a0d17; --ink:#e8ecf8; --muted:#a3acc7; --line:#1f273d;
      --brandA:#6a5cff; --brandB:#00d4ff;
      /* koyu & parlak (neon) palet */
      --c1:#5b21b6; /* koyu mor */
      --c2:#1d4ed8; /* canlı mavi */
      --c3:#0891b2; /* neon camgöbeği */
      --c4:#be185d; /* parlak fuşya */
      --paper:#0f1422; --paper2:#0b0f1b;
      --btn:#111827; --btnInk:#fff;
      --focus:#38bdf8;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}

    /* ÜST BAR */
    .topbar{position:sticky;top:0;display:flex;align-items:center;gap:16px;height:64px;
      background:linear-gradient(90deg,var(--brandA),var(--brandB));background-size:200% 200%;animation:barShift 8s ease-in-out infinite;
      padding:0 16px;box-shadow:0 2px 14px rgba(10,20,60,.35);z-index:100;border-bottom:1px solid #0e1630}
    @keyframes barShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .brand img{height:44px;filter:drop-shadow(0 2px 6px rgba(0,0,0,.4))}
    .grow{flex:1}
    .btn{border:0;border-radius:14px;padding:10px 16px;font-weight:600;cursor:pointer}
    .btn.primary{background:var(--btn);color:var(--btnInk)}
    .btn.ghost{background:rgba(255,255,255,.08);color:#fff;border:1px solid rgba(255,255,255,.2)}
    .btn:focus{outline:2px solid var(--focus);outline-offset:2px}

    /* HERO & PANELLER */
    .hero{max-width:1100px;margin:24px auto;padding:20px 16px}
    .panel{background:linear-gradient(270deg,var(--c1),var(--c2),var(--c3),var(--c4));background-size:800% 800%;animation:panelBG 16s ease infinite;
      border-radius:20px;padding:28px;box-shadow:0 10px 40px rgba(5,10,30,.45);color:#fff;text-align:center;border:1px solid #1a2444}
    @keyframes panelBG{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .title{font-size:46px;font-weight:900;margin:0 0 12px;text-shadow:0 1px 10px rgba(0,0,0,.35)}
    .subtitle{font-size:20px;margin:0 0 20px;opacity:.95}

    /* SLOGAN PANEL */
    .slogan-panel{margin:20px auto;max-width:900px;padding:30px;border-radius:20px;text-align:center;color:#fff;
      background:linear-gradient(270deg,var(--c1),var(--c2),var(--c3),var(--c4));
      background-size:800% 800%;animation:sloganBG 20s ease infinite;border:1px solid #1a2444;box-shadow:0 10px 40px rgba(5,10,30,.45)}
    @keyframes sloganBG{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .slogan-rotator{font-size:26px;font-weight:700;min-height:34px;transition:opacity 1.2s ease}

    /* KATEGORİ GRID */
    .grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-top:20px}
    .card{border-radius:18px;padding:18px;min-height:130px;display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center;
      color:#fff;animation:cardColors 20s infinite alternate ease-in-out;background:var(--c1);transition:transform .18s,border-color .2s; border:1px solid #1a2444}
    .card:hover{transform:translateY(-6px)}
    @keyframes cardColors{0%{background:var(--c1)}25%{background:var(--c2)}50%{background:var(--c3)}75%{background:var(--c4)}100%{background:var(--c1)}}
    .emoji{font-size:28px}

    /* ÖZELLİKLER */
    .features{display:grid;gap:12px;margin-top:20px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .feature{padding:14px;border-radius:14px;color:#fff;text-align:center;animation:cardColors 20s infinite alternate ease-in-out; border:1px solid #1a2444}

    /* DIALOG / MOBİL UYUM + ŞİFRE GÖRÜNÜRLÜK */
    dialog{border:0;border-radius:16px;padding:0;max-width:95vw;background:var(--paper);color:var(--ink);border:1px solid #1e2a4d}
    .modal{padding:18px}
    .in{width:100%;padding:12px 44px 12px 12px;border-radius:12px;border:1px solid var(--line);margin-bottom:10px;font-size:16px;background:var(--paper2);color:var(--ink)}
    .in:focus{outline:2px solid var(--focus);border-color:transparent}
    .x{position:absolute;top:10px;right:12px;background:transparent;border:0;font-size:22px;cursor:pointer;color:#94a3b8}
    .row{display:flex;gap:10px}
    @media (max-width:640px){ .row{flex-direction:column} .title{font-size:36px} .subtitle{font-size:18px} }

    .field{position:relative}
    .toggle{position:absolute;right:10px;top:50%;transform:translateY(-50%);border:0;background:transparent;color:#9fb2d7;cursor:pointer;font-size:14px}
    .toggle:hover{color:#d1e2ff}

  </style>
</head>
<body>
  <header class="topbar">
    <a class="brand" href="#"><img src="assets/img/seffaf.png" alt="logo"/></a>
    <div class="grow"></div>
    <button class="btn ghost" id="btnLoginOpen">Giriş Yap</button>
    <button class="btn primary" id="btnSignupOpen">Kaydol</button>
  </header>

  <main class="hero">
    <section class="panel" aria-labelledby="welcome-title">
      <h1 id="welcome-title" class="title">Takas Çemberi’ne Hoş Geldiniz</h1>
      <p class="subtitle">Evinizdeki eşyaları değerinde takas edin, atığı azaltın, birlikte kazanın.</p>
    </section>

    <section class="slogan-panel" aria-hidden="false">
      <div class="slogan-rotator" id="slogan" aria-live="polite"></div>
    </section>

    <section class="panel" aria-labelledby="cats-title" style="margin-top:12px">
      <h2 id="cats-title" style="margin-bottom:12px">Kategoriler</h2>
      <div class="grid" role="list">
        <div class="card" role="listitem"><div class="emoji">🏠</div><h3>Ev & Hobi</h3><p>Ev eşyaları, hobi ürünleri</p></div>
        <div class="card" role="listitem"><div class="emoji">🏡</div><h3>Taşınmaz</h3><p>Ev, arsa, tarla</p></div>
        <div class="card" role="listitem"><div class="emoji">🚗</div><h3>Motorlu Taşıtlar</h3><p>Araba, motosiklet, yedek parça</p></div>
        <div class="card" role="listitem"><div class="emoji">🧸</div><h3>Oyuncak</h3><p>Her yaşa uygun oyuncaklar</p></div>
        <div class="card" role="listitem"><div class="emoji">👗</div><h3>Giyim</h3><p>Kadın, erkek, çocuk</p></div>
        <div class="card" role="listitem"><div class="emoji">⚡</div><h3>Beyaz Eşya</h3><p>Ev aletleri, mutfak</p></div>
        <div class="card" role="listitem"><div class="emoji">💻</div><h3>Teknoloji</h3><p>Bilgisayar, telefon</p></div>
        <div class="card" role="listitem"><div class="emoji">🛋️</div><h3>Mobilya</h3><p>Koltuk, masa, dolap</p></div>
      </div>

      <div class="features" style="margin-top:18px">
        <div class="feature">✅ Güvenli Takas<br/>SSL ve KVKK güvencesiyle güvenli işlemler.</div>
        <div class="feature">📱 Kolay Kullanım<br/>Mobil uyumlu arayüz ile her yerde ilan ver.</div>
        <div class="feature">💬 Canlı Destek<br/>7/24 destek ekibi seninle.</div>
      </div>
    </section>

    <section class="panel" style="margin-top:20px">
      <h2>KVKK</h2>
      <p>Veri sorumlusu: Takas Çemberi A.Ş.<br/>Toplanan veriler: Ad, iletişim, işlem kayıtları.<br/>Amaç: Üyelik, güvenli takas, müşteri desteği.<br/>Haklarınız: Bilgi alma, düzeltme, silme, itiraz.</p>
      <h3>Gizlilik</h3>
      <p>Çerez kullanımı ve tercih yönetimi.<br/>Üçüncü taraflarla paylaşım ilkeleri.<br/>Veri saklama süreleri ve şifreleme.</p>
      <h3>Güvenlik</h3>
      <p>SSL/TLS ile şifreli bağlantı.<br/>2FA ve anormal aktivite izleme.<br/>İçerik moderasyonu ve raporlama.</p>
      <h3>SSL Bilgisi</h3>
      <p>Modern protokoller (TLS 1.3) desteği.<br/>Güncel sertifika ve HSTS uygulanması.<br/>Güvenli çerçeve ve CORS politikaları.</p>
      <h3>Kullanım Şartları</h3>
      <p>İlan kuralları ve yasaklı içerikler.<br/>Üyelik sorumlulukları ve fesih.<br/>Uyuşmazlık ve yetkili yargı mercii.</p>
      <p style="margin-top:8px">© 2025 Takas Çemberi — milli sermayeyi koru, atığı azalt ♻️</p>
    </section>
  </main>

  <!-- MODALLAR: Giriş / Kayıt -->
  <dialog id="dlgLogin" aria-modal="true" role="dialog">
    <form method="dialog" class="modal" style="min-width:min(520px,95vw);position:relative">
      <button class="x" value="close" aria-label="Kapat" onclick="this.closest('dialog').close()">✕</button>
      <h3 style="margin:0 0 12px">Giriş Yap</h3>
      <button type="button" class="btn primary" id="btnGoogleLogin" style="width:100%;margin-bottom:10px">Google ile Giriş</button>
      <div style="display:flex;align-items:center;gap:10px;margin:8px 0"><span style="flex:1;height:1px;background:#233058"></span><small style="color:#8ea2c9">veya e‑posta ile</small><span style="flex:1;height:1px;background:#233058"></span></div>
      <input class="in" type="email" id="loginEmail" placeholder="E‑posta" required />
      <div class="field">
        <input class="in" type="password" id="loginPass" placeholder="Şifre" required />
        <button type="button" class="toggle" data-target="loginPass">Göster</button>
      </div>
      <button type="button" class="btn primary" id="btnEmailLogin" style="width:100%;margin-top:8px">Giriş Yap</button>
      <div style="text-align:center;margin-top:8px">
        <button type="button" id="btnForgot" style="background:none;border:0;color:#60a5fa;font-weight:700;cursor:pointer">Şifremi Unuttum</button>
        <button type="button" id="btnResendVerify" style="background:none;border:0;color:#34d399;font-weight:700;cursor:pointer">Doğrulama Mailini Tekrar Gönder</button>
      </div>
    </form>
  </dialog>

  <dialog id="dlgSignup" aria-modal="true" role="dialog">
    <form method="dialog" class="modal" style="min-width:min(560px,95vw);position:relative">
      <button class="x" value="close" aria-label="Kapat" onclick="this.closest('dialog').close()">✕</button>
      <h3 style="margin:0 0 12px">Kaydol</h3>
      <button type="button" class="btn primary" id="btnGoogleSignup" style="width:100%;margin-bottom:10px">Google ile Devam Et</button>
      <div style="display:flex;align-items:center;gap:10px;margin:8px 0"><span style="flex:1;height:1px;background:#233058"></span><small style="color:#8ea2c9">veya formu doldur</small><span style="flex:1;height:1px;background:#233058"></span></div>
      <div class="row">
        <input class="in" type="text" id="firstName" placeholder="İsim" required />
        <input class="in" type="text" id="lastName" placeholder="Soyisim" required />
      </div>
      <div class="row">
        <input class="in" type="text" id="city" placeholder="Yaşadığı Şehir" required />
        <input class="in" type="text" id="username" placeholder="Kullanıcı Adı" required />
      </div>
      <input class="in" type="email" id="email" placeholder="E‑posta" required />
      <div class="row">
        <div class="field" style="flex:1">
          <input class="in" type="password" id="pass1" placeholder="Şifre" required />
          <button type="button" class="toggle" data-target="pass1">Göster</button>
        </div>
        <div class="field" style="flex:1">
          <input class="in" type="password" id="pass2" placeholder="Şifre (tekrar)" required />
          <button type="button" class="toggle" data-target="pass2">Göster</button>
        </div>
      </div>
      <button type="button" class="btn primary" id="btnEmailSignup" style="width:100%;margin-top:10px">Kaydol</button>
    </form>
  </dialog>

  <script type="module">
    /* Firebase */
    import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBUUNSYxoWNUsK0C-C04qTUm6KM5756fvg",
      authDomain: "ureten-eller-v2.firebaseapp.com",
      projectId: "ureten-eller-v2",
      storageBucket: "ureten-eller-v2.firebasestorage.app",
      messagingSenderId: "621494781131",
      appId: "1:621494781131:web:13cc3b061a5e94b7cf874e"
    };

    const app = initializeApp(firebaseConfig);
    const auth = initializeAuth(app, { persistence: [indexedDBLocalPersistence, browserLocalPersistence] });
    // İlk yüklemede bozuk/expire oturumları temizle (400 accounts:lookup koruması)
    (async () => {
      try { await auth.authStateReady(); } catch (e) { console.warn("authStateReady", e); }
      onAuthStateChanged(auth, async (user) => {
        if (!user) return;
        try { await user.reload(); } catch (e) {
          console.warn("stale session -> signOut", e);
          try { await signOut(auth); } catch {}
        }
      });
    })();
// const actionCodeSettings = { url: 'https://takascemberi.com/verify-complete', handleCodeInApp: false };

    const $ = (s, r=document)=>r.querySelector(s);

    // Modallar
    $('#btnLoginOpen')?.addEventListener('click', ()=> $('#dlgLogin')?.showModal());
    $('#btnSignupOpen')?.addEventListener('click', ()=> $('#dlgSignup')?.showModal());

    // Şifre görünürlüğü
    function togglePass(btn){
      const id = btn.getAttribute('data-target');
      const el = document.getElementById(id);
      if(!el) return;
      el.type = (el.type === 'password') ? 'text' : 'password';
      btn.textContent = (el.type === 'password') ? 'Göster' : 'Gizle';
    }
    document.querySelectorAll('.toggle').forEach(b=> b.addEventListener('click', ()=> togglePass(b)));

    // Slogan rotator
    const slogans = ["Yükle • Takasla • Kazan","Paylaş • Değiş • Mutlu Ol","Doğaya • Bütçene • Dost"]; let i=0; const box=$('#slogan');
    function rotate(){ if(!box) return; box.style.opacity=0; setTimeout(()=>{ box.textContent=slogans[i]; box.style.opacity=1; i=(i+1)%slogans.length; },600);} rotate(); setInterval(rotate,15000);

    // Google akışı
    const provider = new GoogleAuthProvider();
    async function googleLogin(){
      const cred = await signInWithPopup(auth, provider);
      try{ const db = getFirestore(app); await setDoc(doc(db,'users',cred.user.uid),{ uid:cred.user.uid, displayName:cred.user.displayName||'', email:cred.user.email||'', photoURL:cred.user.photoURL||'', provider:'google', createdAt:serverTimestamp(), lastLoginAt:serverTimestamp() },{merge:true}); }catch{}
      $('#dlgLogin')?.close(); $('#dlgSignup')?.close();
    }
    $('#btnGoogleLogin')?.addEventListener('click', googleLogin);
    $('#btnGoogleSignup')?.addEventListener('click', googleLogin);

    // E‑posta ile giriş
    $('#btnEmailLogin')?.addEventListener('click', async ()=>{
      const email = $('#loginEmail').value.trim();
      const pass  = $('#loginPass').value;
      await signInWithEmailAndPassword(auth,email,pass); $('#dlgLogin')?.close();
    });

    // Kayıt
    $('#btnEmailSignup')?.addEventListener('click', async ()=>{
      const firstName=$('#firstName').value.trim(); const lastName=$('#lastName').value.trim();
      const city=$('#city').value.trim(); const username=$('#username').value.trim();
      const email=$('#email').value.trim(); const p1=$('#pass1').value; const p2=$('#pass2').value;
      if(p1!==p2){ alert('Şifreler eşleşmiyor'); return; }
      const cred = await createUserWithEmailAndPassword(auth,email,p1).catch(e=>{ const code=(e&&e.code)||''; if(code.includes('auth/email-already-in-use')){ alert('Bu e-posta zaten kayıtlı. Giriş yap veya Şifremi Unuttum ile sıfırla.'); document.getElementById('dlgSignup')?.close(); document.getElementById('dlgLogin')?.showModal(); } else { alert('Kayıt hatası: '+(e?.message||e)); } throw e; });
      await updateProfile(cred.user,{ displayName:`${firstName} ${lastName}` });
      try{ const db = getFirestore(app); await setDoc(doc(db,'users',cred.user.uid),{ uid:cred.user.uid, firstName,lastName,city,username,email, provider:'password', createdAt:serverTimestamp() },{merge:true}); }catch{}
      $('#dlgSignup')?.close();
    });

    // Şifre sıfırlama
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
    $('#btnForgot')?.addEventListener('click', async ()=>{
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
      let email = $('#loginEmail')?.value?.trim();
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
      if(!email){ email = prompt('Şifre sıfırlama için e‑posta:')?.trim() || ''; }
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
      if(!email) return;
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
      await sendPasswordResetEmail(auth, email);
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
      alert('Sıfırlama e‑postası gönderildi: '+email);
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
    });
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
  </script>
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
</body>
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
</html>
        // Doğrulama yeniden gönder
        $('#btnResendVerify')?.addEventListener('click', async ()=>{
          const email = $('#loginEmail')?.value?.trim() || prompt('E-posta:')?.trim() || '';
          if(!email) return;
          try {
            const tempPass = $('#loginPass')?.value || prompt('Şifre (geçici giriş için):') || '';
            if(!tempPass) return;
            const { user } = await signInWithEmailAndPassword(auth, email, tempPass);
            await sendEmailVerification(user);
            alert('Doğrulama e-postası gönderildi: '+email);
          } catch(e) {
            alert('Gönderilemedi: ' + (e?.message || e));
          } finally {
            try { await signOut(auth); } catch {}
          }
        });
