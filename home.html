<!-- /home.html -->
<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Takas Çemberi • Ana Sayfa</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg:#ffc0cb; --bg2:#ffd6e7;
      --paper:#ffffff; --paper2:#fff5f8; --ink:#1b1b1f; --muted:#5f5f68; --line:#ffd0dc;
      --brandA:#6a5cff; --brandB:#00d4ff; --focus:#0ea5e9;
      --btn:#111827; --btnInk:#fff;
      --c1:#ff80ab; --c2:#a78bfa; --c3:#60a5fa; --c4:#34d399; --c5:#f59e0b;
      --black:#0b0b0f; --black-ink:#e8e8f0; --black-line:#1e1e27;
      --bottomH:64px; /* alt bar yüksekliği */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg,var(--bg),var(--bg2));
      color:var(--ink);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      padding-bottom:calc(var(--bottomH) + env(safe-area-inset-bottom,0px) + 12px); /* alt barla çakışmayı önler */
    }
    a,button{font:inherit}

    /* Topbar */
    .topbar{
      position:sticky;top:0;z-index:50;display:flex;align-items:center;gap:12px;height:64px;
      padding:0 12px 0 16px;
      background:linear-gradient(90deg,var(--brandA),var(--brandB)); background-size:200% 200%; animation:barShift 8s ease-in-out infinite;
      border-bottom:1px solid rgba(0,0,0,.06); box-shadow:0 2px 12px rgba(10,20,60,.25)
    }
    @keyframes barShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:#fff}
    .brand img{height:44px;filter:drop-shadow(0 2px 6px rgba(0,0,0,.35))}
    .brand strong{letter-spacing:.2px}
    .grow{flex:1}
    .btn{border:1px solid rgba(255,255,255,.24);background:rgba(0,0,0,.18);color:#fff;border-radius:12px;padding:8px 14px;cursor:pointer}
    .btn.primary{background:var(--btn);border-color:#000;color:var(--btnInk)}
    .btn:focus{outline:2px solid var(--focus);outline-offset:2px}

    /* Hero */
    .hero{max-width:1200px;margin:20px auto;padding:0 16px}
    .panel{background:var(--paper);border:1px solid var(--line);border-radius:20px;padding:24px;box-shadow:0 8px 28px rgba(170, 26, 80, .22)}
    .hero-panel{
      display:grid;place-items:center;text-align:center;padding:40px;
      background:linear-gradient(135deg,var(--c1),var(--c2),var(--c3),var(--c4),var(--c5));
      background-size:400% 400%;animation:barShift 14s ease infinite;border-color:transparent
    }
    .title{margin:0 0 10px;font-size:46px;font-weight:900}
    .subtitle{margin:0;font-size:20px}
    /* Kontrast için beyaz + gölge */
    .gx{color:#ffffff;text-shadow:0 2px 10px rgba(0,0,0,.25),0 0 24px rgba(0,0,0,.15)}
    .gx-sub{color:#fffefc;opacity:.96;text-shadow:0 1px 6px rgba(0,0,0,.18)}
    .slogan{
      margin:16px auto 12px;max-width:900px;text-align:center;background:var(--paper2);border:1px solid var(--line);
      border-radius:16px;padding:16px 18px;font-weight:800;letter-spacing:.5px
    }

    /* Kategoriler */
    .grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-top:16px}
    .card{
      border-radius:18px;padding:18px;min-height:130px;display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center;
      color:#fff;border:1px solid rgba(255,255,255,.22);text-align:center;
      background:linear-gradient(135deg,var(--c1),var(--c2));background-size:300% 300%;animation:cardShift 16s ease-in-out infinite; text-decoration:none
    }
    .card:hover{transform:translateY(-4px)}
    @keyframes cardShift{
      0%{background-position:0% 50%}
      25%{background-position:50% 0%;background-image:linear-gradient(135deg,var(--c2),var(--c3))}
      50%{background-position:100% 50%;background-image:linear-gradient(135deg,var(--c3),var(--c4))}
      75%{background-position:50% 100%;background-image:linear-gradient(135deg,var(--c4),var(--c5))}
      100%{background-position:0% 50%;background-image:linear-gradient(135deg,var(--c1),var(--c2))}
    }
    .emoji{font-size:28px}

    /* Özellikler */
    .features{display:grid;gap:12px;margin-top:18px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .feature{padding:14px;border-radius:14px;color:#111827;text-align:center;border:1px solid var(--line);
      background:linear-gradient(135deg,#fff,#ffeaf3)}

    /* Bottom nav */
    .bottom-nav{
      position:fixed;left:0;right:0;bottom:0;background:var(--paper);border-top:1px solid var(--line);
      display:grid;grid-template-columns:repeat(3,1fr);z-index:40;height:var(--bottomH)
    }
    .tab{appearance:none;border:0;background:transparent;color:#6b7280;padding:10px 8px;display:flex;gap:6px;flex-direction:column;align-items:center;justify-content:center}
    .tab svg{width:22px;height:22px}
    .tab.active{color:#111827}

    /* Support FAB + popover */
    .support-fab{
      position:fixed;right:16px;bottom:calc(var(--bottomH) + 16px);width:56px;height:56px;border-radius:50%;border:0;cursor:pointer;
      background:#111827;color:#fff;display:grid;place-items:center;box-shadow:0 8px 28px rgba(0,0,0,.25);z-index:45
    }
    .support-fab:focus{outline:3px solid var(--focus);outline-offset:2px}
    .support-pop{
      position:fixed;right:16px;bottom:calc(var(--bottomH) + 82px);min-width:320px;max-width:90vw;border-radius:16px;text-align:center;
      background:linear-gradient(135deg,var(--c1),var(--c2),var(--c3),var(--c4),var(--c5));background-size:400% 400%;
      animation:barShift 14s ease infinite; padding:18px 14px;color:#fff;box-shadow:0 14px 40px rgba(0,0,0,.3);display:none;z-index:46
    }
    .support-pop .msg{margin:0;font-weight:800;font-size:16px;line-height:1.35}
    .support-pop .input-row{display:flex;gap:8px;margin-top:12px;justify-content:center}
    .support-pop .in{flex:1;min-width:180px;max-width:260px;padding:10px;border-radius:12px;border:0}
    .support-pop .send{padding:10px 14px;border-radius:12px;border:0;background:#111827;color:#fff;cursor:pointer}
    .support-pop .arrow{position:absolute;right:24px;bottom:-10px;width:18px;height:18px;transform:rotate(45deg);background:inherit;filter:drop-shadow(0 4px 6px rgba(0,0,0,.25))}

    /* Legal footer */
    .legal{background:var(--black);color:var(--black-ink);border-top:1px solid var(--black-line);margin-top:20px}
    .legal .wrap{max-width:1200px;margin:0 auto;padding:18px 16px}
    .accordion{border:1px solid var(--black-line);border-radius:12px;overflow:hidden}
    .acc-item + .acc-item{border-top:1px solid var(--black-line)}
    .acc-btn{width:100%;text-align:left;background:transparent;color:var(--black-ink);border:0;padding:14px 16px;cursor:pointer;font-weight:800}
    .acc-panel{display:none;padding:0 16px 16px 16px;color:#cfd3e3}
    .acc-item.open .acc-panel{display:block}

    @media (min-width:720px){
      .title{font-size:52px}
      .subtitle{font-size:22px}
    }
  </style>
  <link rel="icon" href="/favicon.png" type="image/png" sizes="32x32"/>
</head>
<body>
  <!-- Üst Bar -->
  <header class="topbar">
    <a class="brand" href="/">
      <img src="assets/img/seffaf.png" alt="Takas Çemberi logo" />
      <strong>Takas Çemberi</strong>
    </a>
    <div class="grow"></div>
    <button id="btnSearch" class="btn" aria-label="Ara">Ara</button>
    <button id="btnProfile" class="btn" aria-label="Profil">Profil</button>
    <button id="btnPostAd" class="btn primary" aria-label="İlan Ver">İlan Ver</button>
    <button id="btnLogout" class="btn" aria-label="Çıkış">Çıkış</button>
  </header>

  <!-- İçerik -->
  <main class="hero">
    <section class="panel hero-panel" aria-labelledby="welcome">
      <h1 id="welcome" class="title gx">Takas Çemberi’ne Hoş Geldiniz</h1>
      <p class="subtitle gx-sub">Evinizdeki eşyaları değerinde takas edin, atığı azaltın, birlikte kazanın.</p>
    </section>

    <section class="slogan" aria-live="polite">Doğaya • Bütçene • Dost</section>
  </main>

  <!-- Kategoriler + Özellikler -->
  <section class="panel" aria-labelledby="cats-title" style="margin:12px auto;max-width:1200px;padding:24px 16px">
    <h2 id="cats-title" style="margin-bottom:12px;text-align:center">Kategoriler</h2>
    <div class="grid" role="list">
      <a class="card" role="listitem" href="/kategori/ev-hobi"><div class="emoji">🏠</div><h3>Ev & Hobi</h3><p>Ev eşyaları, hobi ürünleri</p></a>
      <a class="card" role="listitem" href="/kategori/tasinmaz"><div class="emoji">🏡</div><h3>Taşınmaz</h3><p>Ev, arsa, tarla</p></a>
      <a class="card" role="listitem" href="/kategori/tasit"><div class="emoji">🚗</div><h3>Motorlu Taşıtlar</h3><p>Araba, motosiklet, yedek parça</p></a>
      <a class="card" role="listitem" href="/kategori/oyuncak"><div class="emoji">🧸</div><h3>Oyuncak</h3><p>Her yaşa uygun oyuncaklar</p></a>
      <a class="card" role="listitem" href="/kategori/giyim"><div class="emoji">👗</div><h3>Giyim</h3><p>Kadın, erkek, çocuk</p></a>
      <a class="card" role="listitem" href="/kategori/beyaz-esya"><div class="emoji">⚡</div><h3>Beyaz Eşya</h3><p>Ev aletleri, mutfak</p></a>
      <a class="card" role="listitem" href="/kategori/teknoloji"><div class="emoji">💻</div><h3>Teknoloji</h3><p>Bilgisayar, telefon</p></a>
      <a class="card" role="listitem" href="/kategori/mobilya"><div class="emoji">🛋️</div><h3>Mobilya</h3><p>Koltuk, masa, dolap</p></a>
    </div>

    <div class="features" style="margin-top:18px">
      <div class="feature">✅ Güvenli Takas<br/>SSL ve KVKK güvencesiyle güvenli işlemler.</div>
      <div class="feature">📱 Kolay Kullanım<br/>Mobil uyumlu arayüz ile her yerde ilan ver.</div>
      <div class="feature">💬 Canlı Destek<br/>7/24 destek ekibi seninle.</div>
    </div>
  </section>

  <!-- Alt Bar -->
  <nav class="bottom-nav" aria-label="Alt menü">
    <button class="tab active" id="tabHome" aria-current="page" aria-label="Ana Sayfa">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9.5L12 3l9 6.5"/><path d="M5 10v10h5v-6h4v6h5V10"/></svg>
      <span style="font-size:12px">Ana Sayfa</span>
    </button>
    <button class="tab" id="tabMessages" aria-label="Mesajlar">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12a8.5 8.5 0 0 1-8.5 8.5H7l-4 3 1.5-5.5A8.5 8.5 0 1 1 21 12z"/></svg>
      <span style="font-size:12px">Mesajlar</span>
    </button>
    <button class="tab" id="tabNotifs" aria-label="Bildirimler">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 8a6 6 0 1 1 12 0c0 7 3 5 3 9H3c0-4 3-2 3-9"/><path d="M9 21h6"/></svg>
      <span style="font-size:12px">Bildirimler</span>
    </button>
  </nav>

  <!-- Canlı Destek FAB + Popover -->
  <button class="support-fab" id="btnSupport" aria-label="Canlı Destek">
    <svg viewBox="0 0 24 24" width="26" height="26" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/><path d="M8 13a3 3 0 0 0 3 3h1l4 3-.5-3.5"/></svg>
  </button>
  <div class="support-pop" id="supportPop" role="dialog" aria-modal="true" aria-live="polite" aria-label="Canlı Destek">
    <p class="msg">Merhaba! Yardım için mesaj bırakın. WhatsApp/telefon bağlantısını sonra ekleyeceğiz.</p>
    <div class="input-row">
      <input class="in" id="chatInput" placeholder="Mesajınız" />
      <button type="button" class="send" id="chatSend">Gönder</button>
    </div>
    <div class="arrow" aria-hidden="true"></div>
  </div>

  <!-- Alt Siyah Hukuki Alan -->
  <footer class="legal">
    <div class="wrap">
      <h2 style="margin-top:4px;margin-bottom:10px">Bilgilendirme</h2>
      <div class="accordion" id="acc">
        <div class="acc-item">
          <button class="acc-btn" type="button">KVKK</button>
          <div class="acc-panel"><p>Veri sorumlusu: Takas Çemberi A.Ş.<br/>Toplanan veriler: Ad, iletişim, işlem kayıtları.<br/>Amaç: Üyelik, güvenli takas, müşteri desteği.<br/>Haklarınız: Bilgi alma, düzeltme, silme, itiraz.</p></div>
        </div>
        <div class="acc-item">
          <button class="acc-btn" type="button">Gizlilik</button>
          <div class="acc-panel"><p>Çerez kullanımı ve tercih yönetimi.<br/>Üçüncü taraflarla paylaşım ilkeleri.<br/>Veri saklama süreleri ve şifreleme.</p></div>
        </div>
        <div class="acc-item">
          <button class="acc-btn" type="button">Güvenlik</button>
          <div class="acc-panel"><p>SSL/TLS ile şifreli bağlantı.<br/>2FA ve anormal aktivite izleme.<br/>İçerik moderasyonu ve raporlama.</p></div>
        </div>
        <div class="acc-item">
          <button class="acc-btn" type="button">SSL Bilgisi</button>
          <div class="acc-panel"><p>Modern protokoller (TLS 1.3) desteği.<br/>Güncel sertifika ve HSTS uygulanması.<br/>Güvenli çerçeve ve CORS politikaları.</p></div>
        </div>
        <div class="acc-item">
          <button class="acc-btn" type="button">Kullanım Şartları</button>
          <div class="acc-panel"><p>İlan kuralları ve yasaklı içerikler.<br/>Üyelik sorumlulukları ve fesih.<br/>Uyuşmazlık ve yetkili yargı mercii.</p></div>
        </div>
      </div>
      <p style="margin:12px 0 0;color:#a8acc4">© 2025 Takas Çemberi — milli sermayeyi koru, atığı azalt ♻️</p>
    </div>
  </footer>

  <!-- JS -->
  <script type="module">
    // Neden Firebase? Sadece Çıkış çalışsın diye.
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, setPersistence, browserLocalPersistence, indexedDBLocalPersistence, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBUUNSYxoWNUsK0C-C04qTUm6KM5756fvg",
      authDomain: "ureten-eller-v2.firebaseapp.com",
      projectId: "ureten-eller-v2",
      storageBucket: "ureten-eller-v2.firebasestorage.app",
      messagingSenderId: "621494781131",
      appId: "1:621494781131:web:13cc3b061a5e94b7cf874e"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    try { await setPersistence(auth, indexedDBLocalPersistence); } catch { await setPersistence(auth, browserLocalPersistence); }

    const $ = (s, r=document)=>r.querySelector(s);

    // Üst bar yönlendirmeleri
    $('#btnLogout')?.addEventListener('click', async ()=>{ try{ await signOut(auth);}catch{} location.href = "/"; });
    $('#btnProfile')?.addEventListener('click', ()=>{ location.href = "/profil"; });
    $('#btnPostAd')?.addEventListener('click', ()=>{ location.href = "/ilan/Ilan-verme.html"; });
    $('#btnSearch')?.addEventListener('click', ()=>{ location.href = "/ara"; });

    // Alt bar
    const tabs = [$('#tabHome'), $('#tabMessages'), $('#tabNotifs')].filter(Boolean);
    tabs.forEach(t => t.addEventListener('click', ()=>{
      tabs.forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      if(t.id==='tabHome') location.href = "/";
      if(t.id==='tabMessages') location.href = "/mesajlar";
      if(t.id==='tabNotifs') location.href = "/bildirimler";
    }));

    // Canlı destek popover
    const pop = $('#supportPop');
    const fab = $('#btnSupport');
    fab?.addEventListener('click', ()=>{
      const showing = pop.style.display === 'block';
      pop.style.display = showing ? 'none' : 'block';
    });
    $('#chatSend')?.addEventListener('click', ()=>{
      const input = $('#chatInput');
      const text = (input.value||'').trim();
      if(!text) return;
      const p = document.createElement('p');
      p.className = 'msg';
      p.textContent = text;
      pop.insertBefore(p, pop.querySelector('.input-row'));
      input.value = '';
    });

    // Accordion
    document.querySelectorAll('.acc-btn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const item = btn.parentElement;
        const open = item.classList.contains('open');
        item.classList.toggle('open', !open);
      })
    });
  </script>
</body>
</html>
