<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ä°lan Ver â€¢ Takas Ã‡emberi</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0d1117; --ink:#0f172a; --muted:#6b7280; --line:#e6e8ee;
    --card:#ffffff; --soft:#f8fafc;
    --a1:#ff3d00; --a2:#ffb800; --a3:#00e676; --a4:#14c5fd; --a5:#7c4dff;
    --primary:#e10600; --primary-ink:#fff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:linear-gradient(180deg,#0d1117,#0b1220 55%,#0d1117);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink)}

  .container{max-width:980px;margin:28px auto;padding:16px}

  /* Animated border wrapper that never covers content */
  .frame{position:relative; border-radius:22px; padding:2px; background:#0000; overflow:visible}
  .frame::before{
    content:""; position:absolute; inset: -2px; border-radius:24px;
    background:conic-gradient(from 0deg,var(--a1),var(--a2),var(--a3),var(--a4),var(--a5),var(--a1));
    animation:spin 7s linear infinite; filter:saturate(1.2);
    z-index:0; pointer-events:none;
  }
  @keyframes spin{to{transform:rotate(1turn)}}
  .card{position:relative; z-index:1; background:var(--card); border-radius:20px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.08)}

  /* Close button */
  .close{position:absolute; top:12px; right:12px; border:0; background:#0f172a; color:#fff; width:36px; height:36px; border-radius:10px; font-weight:700; cursor:pointer; opacity:.9}
  .close:hover{opacity:1}

  h1{margin:4px 0 6px 0; font-size:26px}
  .sub{color:var(--muted); margin-bottom:14px; font-size:14px}

  .grid{display:grid; gap:12px}
  @media(min-width:760px){
    .cols-2{grid-template-columns:1fr 1fr}
    .cols-3{grid-template-columns:1fr 1fr 1fr}
    .cols-4{grid-template-columns:1fr 1fr 1fr 1fr}
  }

  label{font-weight:600; font-size:13px; color:#111827; display:block; margin:6px 2px}
  input[type="text"],input[type="number"],select,textarea{
    width:100%; padding:10px 12px; border:1px solid var(--line); border-radius:10px; font-size:14px; background:#fff
  }
  textarea{resize:vertical; min-height:96px}
  .hint{font-size:12px; color:var(--muted); margin-top:4px}
  .divider{height:1px; background:var(--line); margin:14px 0}

  /* Categories ribbon */
  .cats{display:grid; gap:10px; grid-template-columns:repeat(auto-fill,minmax(170px,1fr)); margin-bottom:12px}
  .cat{display:flex; gap:10px; align-items:flex-start; background:var(--soft); border:1px solid #e2e8f0; border-radius:14px; padding:10px 12px}
  .cat b{display:block}
  .cat .ic{font-size:22px; line-height:1}

  /* Upload */
  .upload{border:2px dashed #d2d6e0; border-radius:14px; padding:14px; text-align:center; background:#fafbff}
  .thumbs{display:grid; grid-template-columns:repeat(auto-fill,minmax(110px,1fr)); gap:10px; margin-top:10px}
  .thumb{position:relative; border:1px solid #e5e7eb; border-radius:10px; overflow:hidden; background:#fff}
  .thumb img{display:block; width:100%; height:110px; object-fit:cover}
  .thumb .cap{position:absolute; left:6px; top:6px; background:#0f172a; color:#fff; font-size:11px; padding:2px 6px; border-radius:6px; opacity:.9}

  /* Actions */
  .actions{display:flex; gap:10px; justify-content:flex-end; margin-top:14px}
  .btn{border:0; border-radius:12px; padding:12px 16px; font-weight:700; cursor:pointer; font-size:14px}
  .btn.primary{background:var(--primary); color:var(--primary-ink)}
  .btn.secondary{background:#eef2ff; color:#1e293b}
  .btn:disabled{opacity:.6; cursor:not-allowed}

  .hidden{display:none !important}
</style>
</head>
<body>
  <div class="container">
    <div class="frame">
      <div class="card">
        <button class="close" title="Kapat" onclick="(history.length>1?history.back():document.querySelector('.frame').remove())">Ã—</button>

        <h1>Ä°lan Ver</h1>
        <div class="sub">FotoÄŸraf â†’ Kategori â†’ BaÅŸlÄ±k â†’ AÃ§Ä±klama â†’ Konum â†’ Ã–nizleme â†’ <b>YayÄ±nla</b></div>

        <!-- Kategori Ã§ekmecesi -->
        <div class="cats" aria-label="Kategoriler">
          <div class="cat"><div class="ic">ğŸ </div><div><b>Ev & Hobi</b><div class="hint">Ev eÅŸyalarÄ±, hobi Ã¼rÃ¼nleri</div></div></div>
          <div class="cat"><div class="ic">ğŸ¡</div><div><b>TaÅŸÄ±nmaz</b><div class="hint">Ev, arsa, tarla</div></div></div>
          <div class="cat"><div class="ic">ğŸš—</div><div><b>Motorlu TaÅŸÄ±tlar</b><div class="hint">Araba, motosiklet</div></div></div>
          <div class="cat"><div class="ic">ğŸ§¸</div><div><b>Oyuncak</b><div class="hint">Her yaÅŸa uygun oyuncaklar</div></div></div>
          <div class="cat"><div class="ic">ğŸ‘—</div><div><b>Giyim</b><div class="hint">KadÄ±n, erkek, Ã§ocuk giyim</div></div></div>
          <div class="cat"><div class="ic">âš¡</div><div><b>Beyaz EÅŸya</b><div class="hint">Ev aletleri, mutfak Ã¼rÃ¼nleri</div></div></div>
          <div class="cat"><div class="ic">ğŸ’»</div><div><b>Teknoloji</b><div class="hint">Bilgisayar, telefon, aksesuar</div></div></div>
          <div class="cat"><div class="ic">ğŸ›‹ï¸</div><div><b>Mobilya</b><div class="hint">Koltuk, masa, dolap</div></div></div>
        </div>

        <div class="divider"></div>

        <!-- 1) Foto yÃ¼kleme -->
        <section>
          <label for="photos">Kapak / FotoÄŸraflar (en az 1, en Ã§ok 10)</label>
          <div class="upload">
            <input id="photos" type="file" accept="image/*" multiple />
            <div class="hint">SeÃ§tiÄŸin fotoÄŸraflar aÅŸaÄŸÄ±da anÄ±nda Ã¶nizlenir. Ä°lk foto <b>kapak</b> olarak kullanÄ±lÄ±r.</div>
          </div>
          <div id="thumbs" class="thumbs"></div>
        </section>

        <div class="divider"></div>

        <!-- 2) Kategori alanlarÄ± -->
        <section class="grid cols-3">
          <div>
            <label for="kategori">Kategori</label>
            <select id="kategori">
              <option value="">SeÃ§iniz</option>
              <option value="Araba">Motorlu TaÅŸÄ±tlar / Araba</option>
              <option value="TaÅŸÄ±nmaz">TaÅŸÄ±nmaz</option>
              <option value="Elbise">Giyim</option>
              <option value="Elektronik">Teknoloji</option>
              <option value="EvHobi">Ev & Hobi</option>
              <option value="BeyazEsya">Beyaz EÅŸya</option>
              <option value="Oyuncak">Oyuncak</option>
              <option value="Mobilya">Mobilya</option>
            </select>
          </div>

          <div id="altKatWrap">
            <label for="altKategori">Alt Kategori</label>
            <select id="altKategori"><option value="">Ã–nce kategori seÃ§in</option></select>
            <div id="altHint" class="hint"></div>
          </div>

          <div id="yilWrap" class="hidden">
            <label for="yil">YÄ±l</label>
            <input id="yil" type="number" min="1950" max="2100" placeholder="Ã–rn: 2017">
          </div>
        </section>

        <!-- 3) Araba Ã¶zel alanlarÄ± -->
        <section id="autoFields" class="grid cols-3 hidden" style="margin-top:12px">
          <div>
            <label for="marka">Marka</label>
            <select id="marka"><option value="">SeÃ§iniz</option></select>
          </div>
          <div>
            <label for="model">Model</label>
            <select id="model" disabled><option value="">Ã–nce marka seÃ§in</option></select>
          </div>
          <div id="kmWrap">
            <label for="km">KM</label>
            <select id="km">
              <option value="">SeÃ§iniz</option>
              <option>0-10.000</option><option>10.001-25.000</option><option>25.001-50.000</option>
              <option>50.001-100.000</option><option>100.001-150.000</option><option>150.001+</option>
            </select>
          </div>
        </section>

        <!-- 4) BaÅŸlÄ±k & AÃ§Ä±klama -->
        <section style="margin-top:12px">
          <div class="grid cols-2">
            <div>
              <label for="baslik">BaÅŸlÄ±k (80 karakter)</label>
              <input id="baslik" type="text" maxlength="80" placeholder="Ã–rn: 2017 model, temiz, hatasÄ±z">
              <div class="hint"><span id="titleLen">0</span>/80</div>
            </div>
            <div>
              <label for="durum">ÃœrÃ¼n Durumu</label>
              <select id="durum">
                <option value="">SeÃ§iniz</option>
                <option>SÄ±fÄ±r</option>
                <option>Ä°kinci El</option>
                <option>HasarlÄ±</option>
                <option>ParÃ§a Niyetine</option>
              </select>
            </div>
          </div>
          <label for="aciklama" style="margin-top:6px">AÃ§Ä±klama</label>
          <textarea id="aciklama" placeholder="ÃœrÃ¼nÃ¼ detaylÄ±ca anlatÄ±n..."></textarea>
        </section>

        <!-- 5) Konum -->
        <section style="margin-top:12px" class="grid cols-2">
          <div>
            <label for="il">Ä°l</label>
            <select id="il"><option value="">SeÃ§iniz</option></select>
          </div>
          <div>
            <label for="ilce">Ä°lÃ§e</label>
            <select id="ilce" disabled><option value="">Ã–nce il seÃ§in</option></select>
          </div>
        </section>

        <div class="actions">
          <button id="taslak" class="btn secondary" type="button">Taslak Kaydet</button>
          <button id="yayinaAl" class="btn primary" type="button" disabled>Ä°lanÄ± YayÄ±nla</button>
        </div>

        <div class="hint" style="margin-top:6px">
          YayÄ±nlaâ€™ya basÄ±nca ilan <b>admin onayÄ±na</b> dÃ¼ÅŸer. Onaylanana kadar profilinde â€œOnay Bekleyen Ä°lanlarâ€da gÃ¶rÃ¼nÃ¼r.
        </div>
      </div>
    </div>
  </div>

<script>
/* â€”â€”â€” Basit veri setleri (tam listeyi sonra geniÅŸletebiliriz) â€”â€”â€” */
const PROVINCES = ["Adana","Ankara","Antalya","Bursa","Ä°stanbul","Ä°zmir","Konya","Kocaeli","Gaziantep","Kayseri"];
const DISTRICTS = {
  "Ä°stanbul":["KadÄ±kÃ¶y","ÃœskÃ¼dar","BeÅŸiktaÅŸ","BakÄ±rkÃ¶y","Esenyurt","Pendik","Kartal","Maltepe","Ãœmraniye","AtaÅŸehir"],
  "Ankara":["AltÄ±ndaÄŸ","Ã‡ankaya","Etimesgut","KeÃ§iÃ¶ren","Mamak","Sincan","Yenimahalle","GÃ¶lbaÅŸÄ±","PolatlÄ±","Pursaklar"],
  "Ä°zmir":["BalÃ§ova","BayraklÄ±","Bornova","Buca","Ã‡iÄŸli","Gaziemir","KarabaÄŸlar","KarÅŸÄ±yaka","Konak","Menemen"],
  "Bursa":["Osmangazi","YÄ±ldÄ±rÄ±m","NilÃ¼fer","Ä°negÃ¶l","Gemlik","Mudanya"],
  "Antalya":["Kepez","KonyaaltÄ±","MuratpaÅŸa","Alanya","Manavgat","Serik"],
  "Adana":["Seyhan","YÃ¼reÄŸir","Ã‡ukurova","SarÄ±Ã§am"],
  "Konya":["Karatay","Meram","SelÃ§uklu","EreÄŸli","AkÅŸehir"],
  "Kocaeli":["Ä°zmit","Gebze","DarÄ±ca","Ã‡ayÄ±rova","GÃ¶lcÃ¼k","KÃ¶rfez"],
  "Gaziantep":["Åahinbey","Åehitkamil","Nizip"],
  "Kayseri":["Kocasinan","Melikgazi","Talas"]
};
const CAR_MODELS = {
  "Renault":["Clio","Megane","Talisman","Symbol","Captur"],
  "Fiat":["Egea","Linea","Punto","Doblo"],
  "Volkswagen":["Polo","Golf","Passat","Tiguan"],
  "Toyota":["Corolla","Yaris","Auris","C-HR"],
  "Hyundai":["i20","i30","Elantra","Tucson"],
  "Peugeot":["208","308","3008","508"],
  "Opel":["Corsa","Astra","Insignia","Crossland"],
  "Ford":["Fiesta","Focus","Mondeo","Kuga"],
  "BMW":["1 Serisi","3 Serisi","5 Serisi","X1","X3"],
  "Mercedes-Benz":["A-Serisi","C-Serisi","E-Serisi","GLA"],
  "Audi":["A3","A4","A6","Q3","Q5"]
};

/* â€”â€”â€” Helpers â€”â€”â€” */
const $ = (id)=>document.getElementById(id);
const setOpts=(sel,arr,ph="SeÃ§iniz")=>{
  sel.innerHTML=""; const o=document.createElement("option");o.value="";o.textContent=ph;sel.appendChild(o);
  (arr||[]).forEach(v=>{const op=document.createElement("option");op.value=v;op.textContent=v;sel.appendChild(op)});
  sel.disabled=!(arr&&arr.length);
};

/* â€”â€”â€” Init â€”â€”â€” */
window.addEventListener("DOMContentLoaded",()=>{
  // Ä°l/Ä°lÃ§e
  setOpts($("il"), PROVINCES, "SeÃ§iniz");
  $("il").addEventListener("change", ()=>{ setOpts($("ilce"), DISTRICTS[$("il").value]||[], "Ã–nce il seÃ§in"); });

  // BaÅŸlÄ±k sayaÃ§
  $("baslik").addEventListener("input", ()=> $("titleLen").textContent = $("baslik").value.length);

  // Kategori kurallarÄ±
  const kategori=$("kategori"), altKategori=$("altKategori"), altHint=$("altHint");
  const autoFields=$("autoFields"), yilWrap=$("yilWrap"), kmWrap=$("kmWrap");

  const ALT_BY_CAT={
    "Araba":["Marka alanÄ±nÄ± kullanÄ±n"],
    "TaÅŸÄ±nmaz":["Ev","Arsa","Tarla"],
    "Elbise":["Erkek","KadÄ±n","Ã‡ocuk"],
    "Elektronik":["Telefon","Bilgisayar","Televizyon","DiÄŸer"],
    "EvHobi":["Ev EÅŸyasÄ±","Hobi","Dekorasyon"],
    "BeyazEsya":["BuzdolabÄ±","Ã‡amaÅŸÄ±r Makinesi","BulaÅŸÄ±k Makinesi","FÄ±rÄ±n"],
    "Oyuncak":["EÄŸitici","FigÃ¼r","KonstrÃ¼ksiyon","DiÄŸer"],
    "Mobilya":["Koltuk","Masa","Dolap","Yatak"]
  };

  kategori.addEventListener("change", ()=>{
    const cat=kategori.value;
    setOpts(altKategori, ALT_BY_CAT[cat]||[], cat? "SeÃ§iniz":"Ã–nce kategori seÃ§in");
    altHint.textContent = (cat==="Araba") ? "Not: Araba iÃ§in altta Marka/Model ve YÄ±l kullanÄ±lÄ±r." : "";

    if(cat==="Araba"){
      autoFields.classList.remove("hidden");
      yilWrap.classList.remove("hidden");
      kmWrap.classList.remove("hidden");
      setOpts($("marka"), Object.keys(CAR_MODELS), "SeÃ§iniz");
      setOpts($("model"), [], "Ã–nce marka seÃ§in"); $("model").disabled=true;
    }else{
      autoFields.classList.add("hidden");
      setOpts($("marka"), [], "SeÃ§iniz");
      setOpts($("model"), [], "Ã–nce marka seÃ§in"); $("model").disabled=true;
      yilWrap.classList.add("hidden");
      kmWrap.classList.toggle("hidden", (cat==="Elbise" || cat==="TaÅŸÄ±nmaz"));
    }
    validate();
  });

  $("marka").addEventListener("change", ()=>{
    const brand=$("marka").value;
    const models=CAR_MODELS[brand]||[];
    setOpts($("model"), models, models.length? "SeÃ§iniz":"Model yok");
    $("model").disabled=!models.length; validate();
  });

  // Foto Ã¶nizleme
  const photosInput=$("photos"), thumbs=$("thumbs");
  photosInput.addEventListener("change", ()=>{
    thumbs.innerHTML="";
    const files=Array.from(photosInput.files||[]);
    files.slice(0,10).forEach((f,idx)=>{
      const url=URL.createObjectURL(f);
      const wrap=document.createElement("div"); wrap.className="thumb";
      const img=document.createElement("img"); img.src=url; img.alt=f.name;
      const cap=document.createElement("div"); cap.className="cap"; cap.textContent= idx===0 ? "Kapak" : (idx+1);
      wrap.appendChild(img); wrap.appendChild(cap); thumbs.appendChild(wrap);
    });
    validate();
  });

  // Validasyon
  ["altKategori","yil","km","baslik","aciklama","il","ilce","durum"].forEach(id=>{
    const el=$(id); if(el) el.addEventListener("input", validate);
  });
  function validate(){
    const cat=kategori.value;
    const hasPhoto=(photosInput.files||[]).length>=1;
    let ok = !!cat && hasPhoto && !!$("baslik").value.trim() && $("baslik").value.length<=80
             && !!$("aciklama").value.trim() && !!$("il").value && !!$("ilce").value && !!$("durum").value;

    if(cat==="Araba"){
      ok = ok && !!$("marka").value && !!$("model").value && !!$("yil").value && Number($("yil").value)>=1950 && !!$("km").value;
    }
    $("yayinaAl").disabled = !ok;
  }

  // Taslak
  $("taslak").addEventListener("click", ()=>{
    try{ localStorage.setItem("draftListing", JSON.stringify(collect())); alert("Taslak kaydedildi."); }
    catch{ alert("Taslak kaydedilemedi."); }
  });

  // YayÄ±nla (demo â€“ backend yok)
  $("yayinaAl").addEventListener("click", ()=>{
    console.log("Ä°lan (pending) â†’ admin onayÄ± bekliyor:", collect());
    alert("Ä°lan admin onayÄ±na gÃ¶nderildi!\nOnaylanana kadar profilinde 'Onay Bekleyen Ä°lanlar'da gÃ¶rÃ¼necek.");
  });

  function collect(){
    const files=Array.from($("photos").files||[]);
    return {
      photos: files.map(f=>({name:f.name,size:f.size,type:f.type})),
      category:$("kategori").value, subcategory:$("altKategori").value,
      brand:$("marka")?.value||"", model:$("model")?.value||"",
      year:$("yil")?.value||"", km:$("km")?.value||"",
      title:$("baslik").value.trim(), desc:$("aciklama").value.trim(),
      condition:$("durum").value, city:$("il").value, district:$("ilce").value,
      status:"pending", createdAt:new Date().toISOString()
    };
  }
});
</script>
</body>
</html>
